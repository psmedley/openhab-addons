<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="teslapowerwallcloud"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<!-- Sample Thing Type -->
	<thing-type id="powerwallcloud">
		<!-- Comment this in for Things which need a Bridge to function.
			<supported-bridge-type-refs>
			<bridge-type-ref id="TeslaPowerwallCloudBridge" />
			</supported-bridge-type-refs>
		-->

		<label>TeslaPowerwallCloud Binding Thing</label>
		<description>Sample thing for TeslaPowerwallCloud Binding</description>

		<channels>
			<channel id="solar-power" typeId="solar-power"/>
			<channel id="home-power" typeId="home-power"/>
			<channel id="grid-power" typeId="grid-power"/>
			<channel id="battery-power" typeId="battery-power"/>
			<channel id="powerwall-mode" typeId="powerwall-mode"/>
			<channel id="storm-mode" typeId="storm-mode"/>
			<channel id="grid-status" typeId="grid-status"/>
			<channel id="percent-charged" typeId="percent-charged"/>
			<channel id="battery-reserve" typeId="battery-reserve"/>
			<channel id="site-name" typeId="site-name"/>
			<channel id="version" typeId="version"/>
			<channel id="island-status" typeId="island-status"/>
			<channel id="storm-mode-active" typeId="storm-mode-active"/>
		</channels>

		<config-description>
			<parameter name="refreshToken" type="text" required="true">
				<label>SSO Refresh Token</label>
				<description>SSO Refresh Token from Tesla 3rd party app sign-in</description>
			</parameter>
			<parameter name="siteID" type="text" required="false">
				<label>Powerwall Site ID</label>
				<description>Powerwall Site ID - if left blank - first Powerwall found will be used</description>
			</parameter>
			<parameter name="refreshInterval" type="integer" unit="s" min="1">
				<label>Refresh Interval</label>
				<description>Interval the device is polled in sec.</description>
				<default>60</default>
				<advanced>true</advanced>
			</parameter>
			<parameter name="clientID" type="text">
				<label>Client ID</label>
				<description>Client ID for the Tesla Developer Account being used.</description>
				<default>974e76bd8fad-4ac9-b1f9-8227e2db73b6</default>
				<advanced>true</advanced>
			</parameter>
		</config-description>
	</thing-type>

	<!-- Sample Channel Type -->
	<channel-type id="solar-power">
		<item-type>Number:Power</item-type>
		<label>Solar Power</label>
		<description>Current power generated by solar</description>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="home-power">
		<item-type>Number:Power</item-type>
		<label>Home Power</label>
		<description>Current power consumed by home</description>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="battery-power">
		<item-type>Number:Power</item-type>
		<label>Battery Power</label>
		<description>Current power generated/consumed by Battery</description>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="grid-power">
		<item-type>Number:Power</item-type>
		<label>Grid Power</label>
		<description>Current power generated/consumed by Grid</description>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="powerwall-mode">
		<item-type>String</item-type>
		<label>Operating Mode</label>
		<description>Current Powerwall Operating Mode</description>
		<state>
			<options>
				<option value="self_consumption">Self-Powered</option>
				<option value="autonomous">Time-Based Control</option>
				<option value="backup">Backup</option>
			</options>
		</state>
	</channel-type>
	<channel-type id="storm-mode">
		<item-type>Switch</item-type>
		<label>Storm Mode</label>
		<description>Storm Mode state</description>
	</channel-type>
	<channel-type id="grid-status">
		<item-type>Switch</item-type>
		<label>Grid Status</label>
		<description>Grid Status</description>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="percent-charged">
		<item-type>Number</item-type>
		<label>Powerwall Current Charge</label>
		<description>Powerwall Current Charge</description>
		<state pattern="%.1f %%" readOnly="true"></state>
	</channel-type>
	<channel-type id="battery-reserve">
		<item-type>Number</item-type>
		<label>Powerwall Current Reserve</label>
		<description>How much of the battery capacity is reserved</description>
		<state pattern="%.1f %%"></state>
	</channel-type>
	<channel-type id="island-status">
		<item-type>String</item-type>
		<label>Island Status</label>
		<description>Island Status of the Powerwall</description>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="storm-mode-active">
		<item-type>Switch</item-type>
		<label>Storm Mode Status</label>
		<description>Report if Storm Mode has been activated by Tesla</description>
		<state readOnly="true"/>
	</channel-type>

</thing:thing-descriptions>
